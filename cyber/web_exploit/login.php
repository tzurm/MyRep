<?php

ini_set('display_errors', 1);
error_reporting(E_ALL);

// database connection parameters
$host = "localhost";
$user = "root";
$password = "admin";
$database = "cr02";

// connect to the database
$mysqli = new mysqli($host, $user, $password, $database);

// check for errors
if ($mysqli->connect_errno) {
    die("Failed to connect to MySQL: " . $mysqli->connect_error);
}

// get input parameters
$user = $_POST['username'];
$pass = $_POST['password'];

// sanitize input parameters
$user = $mysqli->real_escape_string($user);
$pass = $mysqli->real_escape_string($pass);

// hash the password
$password_hash = md5($pass);

// prepare SQL query
$sql = "SELECT phone_number FROM cr02 WHERE user='$user' AND hashed_pass='$password_hash'";

// execute SQL query
$result = $mysqli->query($sql);

// check for errors
if (!$result) {
    die("Error executing query: " . $mysqli->error);
}

// check if a matching user was found
if ($result->num_rows > 0) {
    // get phone number from result set
    $row = $result->fetch_assoc();
    $phone_number = $row["phone_number"];
    // display phone number
    echo "Phone number: " . $phone_number;
} else {
    // display error message
    echo "Invalid username or password";
}

// close database connection
$mysqli->close();

?>

